<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="v-cval-dialog.html">

<dom-module id="v-cval-box">
    <style>
        #cval-box-content {
            position: fixed;
            bottom: 0;
            cursor: pointer;
            height: 50px;
            width: 50px;
        }

        #cval-box-content.evaluation {
            left: 0;
            background-color: lightblue;
        }

        #cval-box-content.error {
            left: 50%;
            background-color: red;
        }
    </style>
    <template>
        <div id="cval-box-content" on-click="onClick">[[header]]</div>
    </template>
</dom-module>

<script>
    CvalBox = Polymer({
        is: "v-cval-box",

        properties: {
            header: String,


            errorType: {
                //error or evaluation
                type: String,
                observer: 'onErrorTypeChange'
            }
        },

        factoryImpl: function(header, errorType) {
            this.header = header;
            this.errorType = errorType;
        },

        onErrorTypeChange: function(newValue, oldValue) {
            console.log("Cval box type changed to " + newValue);
            this.$['cval-box-content'].className = newValue;
        },

        onClick: function() {
            console.log("Box clicked");

            var newElem = new CvalDialog(this.header);
            Polymer.dom(this.parentElement).appendChild(newElem);
            this.remove();
        }
    });
</script>

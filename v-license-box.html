<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/iron-overlay-behavior/iron-overlay-behavior.html">

<dom-module id="v-license-box">
    <style>
        #license-box-content {
            position: fixed;
            top: 0;
            right: 0;
            cursor: pointer;
        }

        #license-box-content.trial {
            background-color: lightblue;
        }

        #license-box-content.unlicensed {
            background-color: red;
        }

        #license-box-content.expired {
            background-color: coral;
        }
    </style>
    <template>
        <div id="license-box-content" class$="[[type]]" on-click="_close">[[content]]</div>
    </template>
</dom-module>

<script>
    LicenseBox = Polymer({
        is: "v-license-box",

        behaviors: [Polymer.IronOverlayBehavior],

        contents: {
            unlicensed: 'Unlicensed copy of Vaadin %s',
            trial: 'Vaadin %s trial license',
            expired: 'Vaadin %s license expired'
        },

        properties: {
            content: {
                type: String,
                computed: '_computeContent(type, productName)'
            },
            type: String,
            productName: String,
            expiryEpoch: Number,

            //override
            noCancelOnEscKey: {
                type: Boolean,
                value: true
            },
            noCancelOnOutsideClick: {
                type: Boolean,
                value: true
            }
        },

        _close: function () {
            this.fire('v-license-box-close', {type: this.type, expiryEpoch: this.expiryEpoch});
            this.close();
        },

        _computeContent: function (type, productName) {
            return this.contents[type].replace(/%s/, productName);
        }
    });
</script>

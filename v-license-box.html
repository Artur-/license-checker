<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="v-license-dialog.html">

<dom-module id="v-license-box">
    <style>
        #license-box-content {
            position: fixed;
            bottom: 0;
            cursor: pointer;
            height: 50px;
            width: 50px;
        }

        #license-box-content.evaluation {
            left: 0;
            background-color: lightblue;
        }

        #license-box-content.error {
            left: 50%;
            background-color: red;
        }
    </style>
    <template>
        <div id="license-box-content" on-click="onClick">[[header]]</div>
    </template>
</dom-module>

<script>
    LicenseBox = Polymer({
        is: "v-license-box",

        properties: {
            header: String,


            errorType: {
                //error or evaluation
                type: String,
                observer: 'onErrorTypeChange'
            }
        },

        factoryImpl: function(header, errorType) {
            this.header = header;
            this.errorType = errorType;
        },

        onErrorTypeChange: function(newValue, oldValue) {
            console.log("License box type changed to " + newValue);
            this.$['license-box-content'].className = newValue;
        },

        onClick: function() {
            console.log("Box clicked");

            var newElem = new LicenseDialog(this.header);
            Polymer.dom(this.parentElement).appendChild(newElem);
            this.remove();
        }
    });
</script>
